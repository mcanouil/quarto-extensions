<script id="quarto-external-links" type="text/javascript">
  function addSecurityAttributes(link) {
    if (link.getAttribute('target') === '_blank') {
      const currentRel = link.getAttribute('rel') || '';
      const relValues = new Set(currentRel.split(/\s+/).filter(Boolean));
      relValues.add('noopener');
      relValues.add('noreferrer');
      link.setAttribute('rel', Array.from(relValues).join(' '));
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('a[target="_blank"]').forEach(addSecurityAttributes);

    const observer = new MutationObserver(mutations => {
      mutations.forEach(mutation => {
        mutation.addedNodes.forEach(node => {
          if (node.nodeType === 1) {
            if (node.tagName === 'A') {
              addSecurityAttributes(node);
            }
            node.querySelectorAll('a[target="_blank"]').forEach(addSecurityAttributes);
          }
        });
      });
    });

    observer.observe(document.body, { childList: true, subtree: true });
  });
</script>
